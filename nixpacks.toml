# Tell Railway to install both Python and Node
providers = ["python", "nodejs"]

[phases.install]
# Install dependencies
cmds = ["npm --prefix frontend install", "pip install -r backend/requirements.txt"]

[phases.build]
# Build React
cmds = ["npm --prefix frontend run build"]

[start]
# STANDARD PRODUCTION LAUNCH
# We run 4 workers. They will coordinate via Redis to pick 1 Data Fetcher.
cmd = "gunicorn backend.app.main:app --workers 4 --worker-class uvicorn.workers.UvicornWorker --bind 0.0.0.0:$PORT --timeout 120"