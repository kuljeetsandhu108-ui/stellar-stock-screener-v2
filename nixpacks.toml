# Tell Railway to install both Python and Node
providers = ["python", "nodejs"]

[phases.install]
# Install dependencies
cmds = ["npm --prefix frontend install", "pip install -r backend/requirements.txt"]

[phases.build]
# Build React
cmds = ["npm --prefix frontend run build"]

[start]
# THE HIGH-END UPGRADE:
# Uses Gunicorn process manager with 4 parallel workers.
# This multiplies your server's handling capacity by 4x instantly.
cmd = "gunicorn backend.app.main:app --workers 4 --worker-class uvicorn.workers.UvicornWorker --bind 0.0.0.0:$PORT --timeout 120"